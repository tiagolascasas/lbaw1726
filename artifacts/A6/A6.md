# A6: Indexes, triggers, user functions and population

This artefact was developed with the purpose of determining what the main queries and updates would be done to the database and, from that information, estimate the impact those operations would have on the system. After that analysis, indexes were created in order to improve their performance. Alongside that study, the team also created a set of triggers whose purpose is to enforce certain multi-table constraints and to do certain updates that couldn't otherwise be done using standard operations. Finally, it was also created a set of default data whose purpose is to give an initial population to the database, which is useful for testing purposes.

## 1. Database Workload

### 1.1. Tuple Estimation


| Relation reference | Relation Name | Order of magnitude        | Estimated growth |
| ------------------ | ------------- | ------------------------- | ---------------- |
| R01                | Administrator        | one                   | no growth |
| R02                | Country              | dozens                | no growth |
| R03                | Member               | tens of thousands     | dozens per day |
| R04                | RequestedTermination | dozens                | units per month |
| R05                | Auction              | tens of thousands     | dozens per day |
| R06                | Category             | dozens                | no growth |
| R07                | Publisher            | hundreds              | dozens per week |
| R08                | Language             | dozens                | no growth |
| R09                | CategoryAuction      | tens of thousands     | dozens per day |
| R10                | Wishlist             | thousands             | dozens per day |
| R11                | Bid                  | hundreds of thousands | hundreds per day |
| R12                | AuctionModification  | hundreds              | dozens per month |
| R13                | Notification         | hundreds of thousands | hundreds per day |
| R14                | NotificationAuction  | hundreds of thousands | hundreds per day |
| R15                | Image                | hundreds of thousands | hundreds per day |
| R16                | Message              | thousands             | dozens per day |
| R17                | Comment              | thousands             | dozens per day |


### 1.2. Frequent Queries

<table>
  <tr>
    <th><strong>Query reference</strong></th>
    <th>SELECT01</th>
  </tr>
  <tr>
    <td><strong>Query description</strong></td>
    <td>User profile</td>
  </tr>
  <tr>
    <td><strong>Query frequency</strong></td>
    <td>hundreds per day </td>
  </tr>
  <tr>
    <td colspan="2">
    <code style="display:block;white-space: pre-wrap">
SELECT *
FROM member, image, comment
WHERE member.idImage = image.id AND member.id = $userID;

SELECT datePosted, liked, text, idParent, idSender, idReceiver, username
FROM comment, member
WHERE comment.idParent = $profileID AND is_removed = false AND comment.idSender = member.id;
    </code>
	</td>
  </tr>
</table>


<table>
  <tr>
    <th><strong>Query reference</strong></th>
    <th>SELECT02</th>
  </tr>
  <tr>
    <td><strong>Query description</strong></td>
    <td>Auction page</td>
  </tr>
  <tr>
    <td><strong>Query frequency</strong></td>
    <td>thousands per day </td>
  </tr>
  <tr>
    <td colspan="2">
    <code style="display:block;white-space: pre-wrap">
SELECT auction.&#42;, member.username
FROM auction, member
WHERE auction.id = $auctionID AND idSeller = member.id;

SELECT source
FROM image
WHERE idAuction = $auctionID;
    </code>
	</td>
  </tr>
</table>


<table>
  <tr>
    <th><strong>Query reference</strong></th>
    <th>SELECT03</th>
  </tr>
  <tr>
    <td><strong>Query description</strong></td>
    <td>Current maximum value of auction</td>
  </tr>
  <tr>
    <td><strong>Query frequency</strong></td>
    <td>tens of thousands per day </td>
  </tr>
  <tr>
    <td colspan="2">
		<code style="display:block;white-space: pre-wrap">
SELECT max(bidValue)
FROM bid
WHERE idAuction = $auctionID;
		</code>
	</td>
  </tr>
</table>


<table>
  <tr>
    <th><strong>Query reference</strong></th>
    <th>SELECT04</th>
  </tr>
  <tr>
    <td><strong>Query description</strong></td>
    <td>Search auction</td>
  </tr>
  <tr>
    <td><strong>Query frequency</strong></td>
    <td>hundreds per day </td>
  </tr>
  <tr>
    <td colspan="2">
		<code style="display:block;white-space: pre-wrap">
--Search by category
SELECT auction.&#42;, image.source
FROM auction, categoryAuction, category, image
WHERE categoryAuction.idAuction = auction.idAuction AND categoryAuction.idCategory = category.id AND category.categoryName = $catName AND image.idAuction = auction.idAuction;

--Search by language
SELECT auction.&#42;, image.source
FROM auction, language, image
WHERE auction.idLanguage = language.id AND language.language = $langName AND image.idAuction = auction.idAuction;

--Search by fields
SELECT auction.&#42;, image.source
FROM auction, image
WHERE isbn = $isbn OR author = $author OR title = $title;  
		</code>
	</td>
  </tr>
</table>


<table>
  <tr>
    <th><strong>Query reference</strong></th>
    <th>SELECT05
	</th>
  </tr>
  <tr>
    <td><strong>Query description</strong></td>
    <td>Notifications</td>
  </tr>
  <tr>
    <td><strong>Query frequency</strong></td>
    <td>tens of thousands per day </td>
  </tr>
  <tr>
    <td colspan="2">
		<code style="display:block;white-space: pre-wrap">
SELECT notifications.*
FROM notifications
WHERE idMember = $userID AND is_seen = false;
		</code>
	</td>
  </tr>
</table>

<table>
  <tr>
    <th><strong>Query reference</strong></th>
    <th>SELECT06
	</th>
  </tr>
  <tr>
    <td><strong>Query description</strong></td>
    <td>User's complete wishlist</td>
  </tr>
  <tr>
    <td><strong>Query frequency</strong></td>
    <td>thousands per day </td>
  </tr>
  <tr>
    <td colspan="2">
		<code style="display:block;white-space: pre-wrap">
SELECT auction.&#42;
FROM auction, wishlist
WHERE wishlist.idBuyer = $userID AND wishlist.idAuction = auction.id;
		</code>
	</td>
  </tr>
</table>


<table>
  <tr>
    <th><strong>Query reference</strong></th>
    <th>SELECT07
	</th>
  </tr>
  <tr>
    <td><strong>Query description</strong></td>
    <td>Auctions the user participated</td>
  </tr>
  <tr>
    <td><strong>Query frequency</strong></td>
    <td>thousands per day </td>
  </tr>
  <tr>
    <td colspan="2">
		<code style="display:block;white-space: pre-wrap">
SELECT auction.&#42;
FROM auction, bid
WHERE bid.idAuction = auction.id AND bid.idBuyer = $userID;
		</code>
	</td>
  </tr>
</table>


<table>
  <tr>
    <th><strong>Query reference</strong></th>
    <th>SELECT08
	</th>
  </tr>
  <tr>
    <td><strong>Query description</strong></td>
    <td>Auctions the user created</td>
  </tr>
  <tr>
    <td><strong>Query frequency</strong></td>
    <td>thousands per day </td>
  </tr>
  <tr>
    <td colspan="2">
		<code style="display:block;white-space: pre-wrap">
SELECT auction.&#42;
FROM auction
WHERE auction.idSeller = $userID;
		</code>
	</td>
  </tr>
</table>

<table>
  <tr>
    <th><strong>Query reference</strong></th>
    <th>SELECT09
	</th>
  </tr>
  <tr>
    <td><strong>Query description</strong></td>
    <td>Get an image</td>
  </tr>
  <tr>
    <td><strong>Query frequency</strong></td>
    <td>tens of thousands per day </td>
  </tr>
  <tr>
    <td colspan="2">
		<code style="display:block;white-space: pre-wrap">
SELECT source
FROM image
WHERE idAuction = $auctionID;
		</code>
	</td>
  </tr>
</table>

### 1.3. Frequent Updates

<table>
  <tr>
    <th><strong>Query reference</strong></th>
    <th>UPDATE01
	</th>
  </tr>
  <tr>
    <td><strong>Query description</strong></td>
    <td>Bid on an auction</td>
  </tr>
  <tr>
    <td><strong>Query frequency</strong></td>
    <td>thousands per day </td>
  </tr>
  <tr>
    <td colspan="2">
		<code style="display:block;white-space: pre-wrap">
UPDATE bid
SET bidValue = $newValue, bidDate = now()
WHERE idBuyer = $userID AND idAuction = $auctionID;
		</code>
	</td>
  </tr>
</table>


<table>
  <tr>
    <th><strong>Query reference</strong></th>
    <th>UPDATE02
	</th>
  </tr>
  <tr>
    <td><strong>Query description</strong></td>
    <td>Mark a notification as read</td>
  </tr>
  <tr>
    <td><strong>Query frequency</strong></td>
    <td>hundreds per day </td>
  </tr>
  <tr>
    <td colspan="2">
		<code style="display:block;white-space: pre-wrap">
UPDATE notification
SET is_seen = TRUE, dateSeen = now()
WHERE idMember = $userID;
		</code>
	</td>
  </tr>
</table>


<table>
  <tr>
    <th><strong>Query reference</strong></th>
    <th>UPDATE03
	</th>
  </tr>
  <tr>
    <td><strong>Query description</strong></td>
    <td>Set comment as removed</td>
  </tr>
  <tr>
    <td><strong>Query frequency</strong></td>
    <td>dozens per day</td>
  </tr>
  <tr>
    <td colspan="2">
		<code style="display:block;white-space: pre-wrap">
UPDATE comment
SET is_removed = TRUE
WHERE id = $commentID;
		</code>
	</td>
  </tr>
</table>

<table>
  <tr>
    <th><strong>Query reference</strong></th>
    <th>UPDATE03
	</th>
  </tr>
  <tr>
    <td><strong>Query description</strong></td>
    <td>Update an auction</td>
  </tr>
  <tr>
    <td><strong>Query frequency</strong></td>
    <td>dozens per day</td>
  </tr>
  <tr>
    <td colspan="2">
		<code style="display:block;white-space: pre-wrap">
UPDATE auction
SET description = $newDescription
WHERE id = $auctionID;

UPDATE image
SET idAuction = $auctionID, idAuctionModification = NULL
WHERE idAuctionModification = $modificationID;
		</code>
	</td>
  </tr>
</table>


<table>
  <tr>
    <th><strong>Query reference</strong></th>
    <th>INSERT01
	</th>
  </tr>
  <tr>
    <td><strong>Query description</strong></td>
    <td>Create a new user</td>
  </tr>
  <tr>
    <td><strong>Query frequency</strong></td>
    <td>dozens per day</td>
  </tr>
  <tr>
    <td colspan="2">
		<code style="display:block;white-space: pre-wrap">
INSERT INTO member (address, age, email, name, password, phone, postalCode, username, idCountry)
VALUES ($address, $age, $email, $name, $password, $phone, $postalCode, $username, $idCountry);
		</code>
	</td>
  </tr>
</table>


<table>
  <tr>
    <th><strong>Query reference</strong></th>
    <th>INSERT02
	</th>
  </tr>
  <tr>
    <td><strong>Query description</strong></td>
    <td>Create a new auction</td>
  </tr>
  <tr>
    <td><strong>Query frequency</strong></td>
    <td>dozens per day</td>
  </tr>
  <tr>
    <td colspan="2">
		<code style="display:block;white-space: pre-wrap">
INSERT INTO auction (author, description, duration, ISBN, title, idPublisher, idLanguage, idSeller)
VALUES ($author, $description, $duration, $ISBN, $title, $idPublisher, $idLanguage, $userID);
		</code>
	</td>
  </tr>
</table>


<table>
  <tr>
    <th><strong>Query reference</strong></th>
    <th>INSERT03
	</th>
  </tr>
  <tr>
    <td><strong>Query description</strong></td>
    <td>Create a new comment</td>
  </tr>
  <tr>
    <td><strong>Query frequency</strong></td>
    <td>dozens per day</td>
  </tr>
  <tr>
    <td colspan="2">
		<code style="display:block;white-space: pre-wrap">
INSERT INTO comment (liked, comment_text, idParent, idSender, idReceiver)
VALUES ($liked, $comment_text, $idParent, $userID, $profileID);
		</code>
	</td>
  </tr>
</table>


<table>
  <tr>
    <th><strong>Query reference</strong></th>
    <th>INSERT04
	</th>
  </tr>
  <tr>
    <td><strong>Query description</strong></td>
    <td>Create a new notification</td>
  </tr>
  <tr>
    <td><strong>Query frequency</strong></td>
    <td>hundreds per day</td>
  </tr>
  <tr>
    <td colspan="2">
		<code style="display:block;white-space: pre-wrap">
INSERT INTO notification (information, idMember)
VALUES ($information, $idMember);

INSERT INTO notification_auction (idAuction, idNotification)
VALUES ($idAuction, $idNotification);
		</code>
	</td>
  </tr>
</table>


<table>
  <tr>
    <th><strong>Query reference</strong></th>
    <th>INSERT05
	</th>
  </tr>
  <tr>
    <td><strong>Query description</strong></td>
    <td>Wishlist an auction</td>
  </tr>
  <tr>
    <td><strong>Query frequency</strong></td>
    <td>dozens per day</td>
  </tr>
  <tr>
    <td colspan="2">
		<code style="display:block;white-space: pre-wrap">
INSERT INTO wishlist (idBuyer, idAuction)
VALUES ($userID, $idAuction);
		</code>
	</td>
  </tr>
</table>

<table>
  <tr>
    <th><strong>Query reference</strong></th>
    <th>INSERT06
	</th>
  </tr>
  <tr>
    <td><strong>Query description</strong></td>
    <td>Bid on an auction for the first time</td>
  </tr>
  <tr>
    <td><strong>Query frequency</strong></td>
    <td>dozens per day</td>
  </tr>
  <tr>
    <td colspan="2">
		<code style="display:block;white-space: pre-wrap">
INSERT INTO bid (idBuyer, idAuction, bidValue)
VALUES ($userID, $idAuction, $bidValue);
		</code>
	</td>
  </tr>
</table>


<table>
  <tr>
    <th><strong>Query reference</strong></th>
    <th>INSERT07
	</th>
  </tr>
  <tr>
    <td><strong>Query description</strong></td>
    <td>Create a message for another user</td>
  </tr>
  <tr>
    <td><strong>Query frequency</strong></td>
    <td>dozens per day</td>
  </tr>
  <tr>
    <td colspan="2">
		<code style="display:block;white-space: pre-wrap">
INSERT INTO message (message_text, idSender, idReceiver)
VALUES ($text, $userID, $receiverID);
		</code>
	</td>
  </tr>
</table>


<table>
  <tr>
    <th><strong>Query reference</strong></th>
    <th>INSERT08
	</th>
  </tr>
  <tr>
    <td><strong>Query description</strong></td>
    <td>Upload an image</td>
  </tr>
  <tr>
    <td><strong>Query frequency</strong></td>
    <td>hundreds per day</td>
  </tr>
  <tr>
    <td colspan="2">
		<code style="display:block;white-space: pre-wrap">
--for users
INSERT INTO image (source)
VALUES ($source);

--for auctions
INSERT INTO image (source, idAuction)
VALUES ($source, $idAuction);

--for auction modifications
INSERT INTO image (source, idAuctionModification)
VALUES ($source, $idAuctionModification);
		</code>
	</td>
  </tr>
</table>


<table>
  <tr>
    <th><strong>Query reference</strong></th>
    <th>DELETE01
	</th>
  </tr>
  <tr>
    <td><strong>Query description</strong></td>
    <td>Delete an auction modification</td>
  </tr>
  <tr>
    <td><strong>Query frequency</strong></td>
    <td>dozens per month</td>
  </tr>
  <tr>
    <td colspan="2">
		<code style="display:block;white-space: pre-wrap">
DELETE FROM auction_modification
WHERE idApprovedAuction = $idAuction;
		</code>
	</td>
  </tr>
</table>


<table>
  <tr>
    <th><strong>Query reference</strong></th>
    <th>DELETE02
	</th>
  </tr>
  <tr>
    <td><strong>Query description</strong></td>
    <td>Delete a feedback comment</td>
  </tr>
  <tr>
    <td><strong>Query frequency</strong></td>
    <td>dozens per month</td>
  </tr>
  <tr>
    <td colspan="2">
		<code style="display:block;white-space: pre-wrap">
DELETE FROM comment
WHERE id = $idComment;
		</code>
	</td>
  </tr>
</table>

## 2. Proposed Indices

### 2.1. Performance Indices

<table>
  <tr>
    <th><strong>Index reference</strong></th><th>IDX01</th>
  </tr>
  <tr>
    <td><strong>Related queries</strong></td><td>SELECT01</td>
  </tr>
  <tr>
    <td><strong>Index relation</strong></td><td>member</td>
  </tr>
  <tr>
    <td><strong>Index attribute</strong></td><td>id</td>
  </tr>
  <tr>
    <td><strong>Index type</strong></td><td>Hash</td>
  </tr>
  <tr>
    <td><strong>Cardinality</strong></td><td>High</td>
  </tr>
  <tr>
    <td><strong>Clustering</strong></td><td>No</td>
  </tr>
  <tr>
    <td><strong>Justification</strong></td>
    <td>Query SELECT01 fetches the user profile and is executed many times. Since the user's id is unique, the cardinality is very high, and thus not a good candidate for clustering. It does not need range query support.</td>
  </tr>
  <tr>
    <td colspan="2">
		<code style="display:block;white-space: pre-wrap">
CREATE INDEX user_id ON member USING hash (id);
		</code>
	</td>
  </tr>
</table>


<table>
  <tr>
    <th><strong>Index reference</strong></th><th>IDX02</th>
  </tr>
  <tr>
    <td><strong>Related queries</strong></td><td>SELECT02, SELECT03, SELECT06, SELECT07, SELECT08</td>
  </tr>
  <tr>
    <td><strong>Index relation</strong></td><td>auction</td>
  </tr>
  <tr>
    <td><strong>Index attribute</strong></td><td>id</td>
  </tr>
  <tr>
    <td><strong>Index type</strong></td><td>Hash</td>
  </tr>
  <tr>
    <td><strong>Cardinality</strong></td><td>Very High</td>
  </tr>
  <tr>
    <td><strong>Clustering</strong></td><td>No</td>
  </tr>
  <tr>
    <td><strong>Justification</strong></td>
    <td>Access to auctions happen in many queries, all of which are executed many times. Thus, this access needs to be extremely fast. Since the auction's id is unique, and there are many tuples in the relation, the cardinality is very high, and thus not a good candidate for clustering. It does not need range query support.</td>
  </tr>
  <tr>
    <td colspan="2">
		<code style="display:block;white-space: pre-wrap">
CREATE INDEX auction_id ON auction USING hash (id);
		</code>
	</td>
  </tr>
</table>


<table>
  <tr>
    <th><strong>Index reference</strong></th><th>IDX03</th>
  </tr>
  <tr>
    <td><strong>Related queries</strong></td><td>SELECT05</td>
  </tr>
  <tr>
    <td><strong>Index relation</strong></td><td>notifications</td>
  </tr>
  <tr>
    <td><strong>Index attribute</strong></td><td>id</td>
  </tr>
  <tr>
    <td><strong>Index type</strong></td><td>B-tree</td>
  </tr>
  <tr>
    <td><strong>Cardinality</strong></td><td>Very High</td>
  </tr>
  <tr>
    <td><strong>Clustering</strong></td><td>No</td>
  </tr>
  <tr>
    <td><strong>Justification</strong></td>
    <td>There are many tuples in the relation, but we are only interested in fetching a very small subset of those (the ones that are marked as not yet seen). Since the cardinality is very high, clustering shouldn't be used.</td>
  </tr>
  <tr>
    <td colspan="2">
		<code style="display:block;white-space: pre-wrap">
CREATE INDEX notification_id ON notification USING hash (id) WHERE is_seen = false;
		</code>
	</td>
  </tr>
</table>


<table>
  <tr>
    <th><strong>Index reference</strong></th><th>IDX04</th>
  </tr>
  <tr>
    <td><strong>Related queries</strong></td><td>SELECT03</td>
  </tr>
  <tr>
    <td><strong>Index relation</strong></td><td>bid</td>
  </tr>
  <tr>
    <td><strong>Index attribute</strong></td><td>idBuyer, idAuction</td>
  </tr>
  <tr>
    <td><strong>Index type</strong></td><td>B-tree</td>
  </tr>
  <tr>
    <td><strong>Cardinality</strong></td><td>Very High</td>
  </tr>
  <tr>
    <td><strong>Clustering</strong></td><td>No</td>
  </tr>
  <tr>
    <td><strong>Justification</strong></td>
    <td>There are many tuples in the relation, but we are only interested in fetching the maximum of them, so we use a B-tree to facilitate the comparisons. Since there is a very high cardinality and a very rapid growth, we should not cluster it.</td>
  </tr>
  <tr>
    <td colspan="2">
		<code style="display:block;white-space: pre-wrap">
CREATE INDEX bid_index ON bid USING btree (idBuyer, idAuction);
		</code>
	</td>
  </tr>
</table>

<table>
  <tr>
    <th><strong>Index reference</strong></th><th>IDX05</th>
  </tr>
  <tr>
    <td><strong>Related queries</strong></td><td>SELECT09</td>
  </tr>
  <tr>
    <td><strong>Index relation</strong></td><td>image</td>
  </tr>
  <tr>
    <td><strong>Index attribute</strong></td><td>id</td>
  </tr>
  <tr>
    <td><strong>Index type</strong></td><td>Hash</td>
  </tr>
  <tr>
    <td><strong>Cardinality</strong></td><td>High</td>
  </tr>
  <tr>
    <td><strong>Clustering</strong></td><td>No</td>
  </tr>
  <tr>
    <td><strong>Justification</strong></td>
    <td>There are many tuples in the relation, and we need to access them many times. Therefore, it should be as fast as possible. Due to the high cardinality, clustering is not advised.</td>
  </tr>
  <tr>
    <td colspan="2">
		<code style="display:block;white-space: pre-wrap">
CREATE INDEX image_index ON image USING hash (id);
		</code>
	</td>
  </tr>
</table>


<table>
  <tr>
    <th><strong>Index reference</strong></th><th>IDX6</th>
  </tr>
  <tr>
    <td><strong>Related queries</strong></td><td>SELECT04</td>
  </tr>
  <tr>
    <td><strong>Index relation</strong></td><td>auction</td>
  </tr>
  <tr>
    <td><strong>Index attribute</strong></td><td>ISBN</td>
  </tr>
  <tr>
    <td><strong>Index type</strong></td><td>B-tree</td>
  </tr>
  <tr>
    <td><strong>Cardinality</strong></td><td>Very High</td>
  </tr>
  <tr>
    <td><strong>Clustering</strong></td><td>No</td>
  </tr>
  <tr>
    <td><strong>Justification</strong></td>
    <td>We want to search auctions by ISBN, and thus it is useful to have them ordered somehow. Due to the high cardinality, clustering is not advised.</td>
  </tr>
  <tr>
    <td colspan="2">
		<code style="display:block;white-space: pre-wrap">
CREATE INDEX isbn_index ON auction USING hash (ISBN);
		</code>
	</td>
  </tr>
</table>


### 2.2. Full-text Search Indices

<table>
  <tr>
    <th><strong>Index reference</strong></th><th>IDX07</th>
  </tr>
  <tr>
    <td><strong>Related queries</strong></td><td>SELECT04</td>
  </tr>
  <tr>
    <td><strong>Index relation</strong></td><td>auction</td>
  </tr>
  <tr>
    <td><strong>Index attribute</strong></td><td>title</td>
  </tr>
  <tr>
    <td><strong>Index type</strong></td><td>GIST</td>
  </tr>
  <tr>
    <td><strong>Cardinality</strong></td><td>Very High</td>
  </tr>
  <tr>
    <td><strong>Clustering</strong></td><td>No</td>
  </tr>
  <tr>
    <td><strong>Justification</strong></td>
    <td>We want to search auctions by title, and thus to improve performance we can use GIST indexes, which are better for full text searches and dynamic data</td>
  </tr>
  <tr>
    <td colspan="2">
		<code style="display:block;white-space: pre-wrap">
CREATE INDEX title_index ON auction USING GIST (to_tsvector('english', title));
		</code>
	</td>
  </tr>
</table>


<table>
  <tr>
    <th><strong>Index reference</strong></th><th>IDX08</th>
  </tr>
  <tr>
    <td><strong>Related queries</strong></td><td>SELECT04</td>
  </tr>
  <tr>
    <td><strong>Index relation</strong></td><td>auction</td>
  </tr>
  <tr>
    <td><strong>Index attribute</strong></td><td>author</td>
  </tr>
  <tr>
    <td><strong>Index type</strong></td><td>GIST</td>
  </tr>
  <tr>
    <td><strong>Cardinality</strong></td><td>Very High</td>
  </tr>
  <tr>
    <td><strong>Clustering</strong></td><td>No</td>
  </tr>
  <tr>
    <td><strong>Justification</strong></td>
    <td>We want to search auctions by author, and thus to improve performance we can use GIST indexes, which are better for full text searches and dynamic data</td>
  </tr>
  <tr>
    <td colspan="2">
		<code style="display:block;white-space: pre-wrap">
CREATE INDEX author_index ON auction USING GIST (to_tsvector('english', author));
		</code>
	</td>
  </tr>
</table>

## 3. Triggers

> User-defined functions and trigger procedures that add control structures to the SQL language or perform complex computations, are identified and described to be trusted by the database server. Every kind of function (SQL functions, Stored procedures, Trigger procedures) can take base types, composite types, or combinations of these as arguments (parameters). In addition, every kind of function can return a base type or a composite type. Functions can also be defined to return sets of base or composite values.

| Trigger reference   | TRIGGER01                                                               |
| Trigger description | Trigger description, including reference to the business rules involved |
| ------------------- | ----------------------------------------------------------------------- |
| SQL code                                                                                      |


## 4. Complete SQL Code

> The database script must also include the SQL to populate a database with test data with an amount of tuples suitable for testing and with plausible values for the fields of the database.
> This code should also be included in the group's github repository as an SQL script, and a link include here.


## Revision history

Changes made to the first submission:
1. Item 1
1. Item 2

***

GROUP17xx, xx/xx/2018

> Group member 1 name, email
> Group member 2 name, email
